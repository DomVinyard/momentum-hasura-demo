mutation BlockPreRegenerate($blockID: uuid!, $generatedAt: timestamptz!) {
  update_blocks_by_pk(
    pk_columns: { id: $blockID }
    _set: { status: "GENERATING", generated_at: $generatedAt, output: null }
  ) {
    id
    status
    prompt
    type
    guidance(where: { is_enabled: { _eq: true } }) {
      id
      prompt
      type
    }
    document {
      id
      prompt
      title
      template
      guidance(where: { is_enabled: { _eq: true } }) {
        id
        prompt
        type
      }
      blocks {
        id
        prompt
        output
        created_at
        type
      }
    }
  }
}
